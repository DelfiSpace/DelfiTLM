{% extends "admin/base.html" %}
{% block title %}DelfiSpace - Account Settings{% endblock %}
{% load i18n static %}

{% block extrastyle %}{{ block.super }}<link rel="stylesheet" type="text/css" href="{% static "admin/css/login.css" %}">
{{ form.media }}
{% endblock %}

{% block usertools %}
  {% if perms.transmission.view_downlink %}
  <a href="{% url 'get_frames_table' link='downlink'%}" >{% translate 'Downlink Transmission' %}</a>
  {% endif %}

  {% if perms.transmission.view_uplink %}
      <a href="{% url 'get_frames_table' link='uplink' %}" >{% translate 'Uplink Transmission' %}</a>
  {% endif %}

  {% if perms.transmission.view_uplink and perms.transmission.view_downlink %}
      <a href="{% url 'submit_job' %}" >{% translate 'Processing' %}</a>
  {% endif %}

    {% if user.is_authenticated %}
        <a href="{% url 'account' %}">{% translate 'Account' %}</a>
        {% else %}
        <a href="{% url 'login' %}">{% translate 'Login' %}</a>
    {% endif %}
{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'homepage' %}">{% translate 'Home' %}</a>
    &rsaquo; {% translate 'Account' %}
</div>
{% endblock %}

{% block nav-sidebar %}{% endblock %}

{% block content %}
{% if user.is_authenticated %}
    <h1>Hello {{ user.username }}!</h1>
{% endif %}

{% if user.is_superuser %}
{% comment %} <div class="text-center"> {% endcomment %}
<a href="/admin/" >{% translate 'Django Admin' %}</a> /
<a href="/dbmanager/" >{% translate 'pgAdmin' %}</a> /
<a href="http://localhost:8086/" >{% translate 'InfluxDB' %}</a> /
<a href="/grafana/" >{% translate 'Grafana' %}</a> /
<a href="https://app.crowdsec.net/login" >{% translate 'Crowdsec' %}</a> /
{% comment %} </div> {% endcomment %}
{% endif %}

<br>
<br>

<p> Account email: {{ user.email }}
<br>
<br>

<a href="{% url 'change_email' %}"><input type="submit" value="Update Email"></input></a>
<a href="{% url 'change_password' %}"><input type="submit" value="Change Password"></input></a>
<a href="{% url 'get_new_key' %}"><input type="submit" value="Create an API key"></input></a>
<br>
<br>


{% if key is not null %}
    <p>API KEY: <br><br> {{ key }}</p>
    <br>
    <p>Please save this key in a secure place, it will not be displayed on this page in the future.</p>
    <p>If lost, a new key needs to be generated.</p>
{% endif %}

<br>

<a href="{% url 'delete_account' %}"><input type="submit" value="Delete Account"></input></a>

{% endblock %}
